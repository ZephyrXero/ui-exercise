{"version":3,"sources":["state/dmailState.jsx","config.js","components/emailCounter.jsx","components/emailHeader.jsx","components/email.jsx","components/listHeader.jsx","components/emailList.jsx","helpers/unHtml.js","components/navbar.jsx","components/sidebar.jsx","pages/dmail.jsx","app.js","index.js"],"names":["SERVER","initialState","currentEmail","emailList","DMailState","React","createContext","DMailStateProvider","props","children","useState","actions","filterEmail","tag","setState","priorState","filterTag","setCurrentEmail","state","useEffect","getEmails","Provider","value","a","fetch","then","response","json","catch","error","console","emails","messages","id","newId","String","EmailCounter","useContext","className","length","EmailHeader","onClick","Number","Email","emailData","filter","email","subject","Boolean","tags","map","key","sender","Date","date","toLocaleDateString","parse","body","ListHeader","EmailList","data-testid","includes","htmlString","DOMParser","parseFromString","textContent","toLocaleString","Navbar","fontSize","Sidebar","reduce","tagList","forEach","push","warn","DMail","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d79ef9ef.chunk.js","sourcesContent":["// I've opted for a simple state manager via React's Context system\nimport React, { useEffect } from 'react';\n\nimport config from '../config';\n\nconst env = process.env.NODE_ENV;\nconst SERVER = config[env].server;\nconst initialState = {\n  currentEmail: null,\n  emailList: []\n};\n\nexport const DMailState = React.createContext();\n\nexport function DMailStateProvider(props) {\n  const { children } = props;\n  const [state, setState] = React.useState({\n    ...initialState,\n    actions: {\n      filterEmail,\n      setCurrentEmail\n    }\n  });\n\n  useEffect(() => {\n    getEmails();\n  }, []);\n\n  return <DMailState.Provider value={state}>{children}</DMailState.Provider>\n\n  async function getEmails() {\n    const FILE_PATH = \"/emails.json\";\n    const emails = await fetch(SERVER + FILE_PATH)\n      .then(response => response.json())\n      .catch(error => console.error('Data file failed to load'));\n\n    if(emails) {\n      setState(priorState => {\n        return { ...priorState, ...{ emailList: emails.messages }};\n      });\n    }\n  }\n\n  function setCurrentEmail(id) {\n    const newId = id ? String(id) : null;\n\n    setState(priorState => {\n      return { ...priorState, ...{ currentEmail: newId } };\n    });\n  }\n\n  function filterEmail(tag) {\n    setState(priorState => {\n      return { ...priorState, ...{ filterTag: tag }};\n    })\n\n    setCurrentEmail(null);\n  }\n}\n\nexport default DMailState;\n","export default {\n  development: {\n    server: 'http://localhost:3000/ui-exercise'\n  },\n  test: {\n    server: 'http://localhost:3000/ui-exercise'\n  },\n  production: {\n    server: 'https://zephyrxero.github.io/ui-exercise'\n  }\n}\n","import React, { useContext } from 'react';\n\nimport DMailState from '../state/dmailState';\n\nfunction EmailCounter() {\n  const { currentEmail, emailList } = useContext(DMailState);\n\n  return (\n    <div className='email-counter'>\n      {currentEmail ? currentEmail : `1-${emailList.length}`} of {emailList.length}\n    </div>\n  );\n}\n\nexport default EmailCounter;\n","import React, { useContext } from 'react';\nimport ArchiveIcon from '@material-ui/icons/Archive';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport ReportIcon from '@material-ui/icons/Report';\n\nimport './emailHeader.scss';\nimport EmailCounter from './emailCounter';\nimport DMailState from '../state/dmailState';\n\nfunction EmailHeader() {\n  const { actions, currentEmail, emailList } = useContext(DMailState);\n\n  return (\n    <div id='email-header'>\n      <button className='flat-button back-button' onClick={() => actions.setCurrentEmail(null)}>\n        <ArrowBackIcon />\n      </button>\n      <ArchiveIcon />\n      <ReportIcon />\n      <DeleteIcon />\n      <MoreVertIcon />\n      <EmailCounter />\n      <button className='flat-button' onClick={goToPrevious}><NavigateBeforeIcon /></button>\n      <button className='flat-button' onClick={goToNext}><NavigateNextIcon /></button>\n    </div>\n  );\n\n  function goToPrevious() {\n    if(currentEmail === '1') {\n      actions.setCurrentEmail(emailList.length)\n    }\n    else {\n      actions.setCurrentEmail(Number(currentEmail) - 1)\n    }\n  }\n\n  function goToNext() {\n    if(currentEmail === String(emailList.length)) {\n      actions.setCurrentEmail('1')\n    }\n    else {\n      actions.setCurrentEmail(Number(currentEmail) + 1)\n    }\n  }\n}\n\nexport default EmailHeader;\n","import React, { useContext } from 'react';\nimport parse from 'html-react-parser';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\n\nimport './email.scss';\nimport EmailHeader from './emailHeader';\nimport DMailState from '../state/dmailState';\n\nfunction Email() {\n  const { currentEmail, emailList } = useContext(DMailState);\n  const emailData = emailList.filter(email => email.id === currentEmail)[0];\n\n  return (\n    <div id='email'>\n      <EmailHeader />\n      <div className='email-container'>\n        <div className='subject'>\n        {emailData.subject}\n        {Boolean(emailData.tags.length) &&\n          emailData.tags.map(tag => (<span className='tag' key={tag}>{tag}</span>))\n        }\n        </div>\n        <div className='metadata'>\n          <AccountCircleIcon />\n            <div className='from-to'>\n              <div className='flex-row'>\n                From <span className='sender'>{emailData.sender}</span>\n              </div>\n              <div className='flex-row'>\n                To me\n              </div>\n            </div>\n          <span className='sent-date'>{new Date(emailData.date).toLocaleDateString()}</span>\n        </div>\n        <div className='body'>\n          {parse(emailData.body)}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Email;\n","import React from 'react';\nimport RefreshIcon from '@material-ui/icons/Refresh';\n\nimport './listHeader.scss';\nimport EmailCounter from './emailCounter';\n\nfunction ListHeader() {\n  return (\n    <div id='list-header'>\n      <RefreshIcon />\n      <span className='group-label'>Unread</span>\n      <EmailCounter />\n    </div>\n  );\n}\n\nexport default ListHeader;\n","import React, { useContext } from 'react';\n\nimport './emailList.scss';\nimport ListHeader from './listHeader';\nimport unHtml from '../helpers/unHtml';\nimport DMailState from '../state/dmailState';\n\nfunction EmailList() {\n  const { actions, emailList, filterTag } = useContext(DMailState);\n\n  return (\n    <div id='email-list' data-testid='email-list'>\n      <ListHeader />\n      {emailList\n        .filter(email => filterTag ? email.tags.includes(filterTag) : true)\n        .map(email => {\n          return (\n            <div className='email-preview' key={email.id} onClick={() => selectEmail(email.id)}>\n              <span className='sender'>{email.sender}</span>\n              <span className='subject'>{email.subject}</span>\n              <span className='body'>{unHtml(email.body)}</span>\n              <span className='date'>{new Date(email.date).toLocaleString()}</span>\n            </div>\n          );\n        })\n      }\n    </div>\n  );\n\n  function selectEmail(id) {\n    actions.setCurrentEmail(id);\n  }\n}\n\nexport default EmailList;\n","export default function unHtml(htmlString) {\n  const tempDoc = new DOMParser().parseFromString(htmlString, 'text/html');\n  return tempDoc.body.textContent || '';\n}\n","import React from 'react';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport EmailIcon from '@material-ui/icons/Email';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport SearchIcon from '@material-ui/icons/Search';\n\nimport './navbar.scss';\n\nfunction Navbar() {\n  return (\n    <div id='navbar'>\n      <div id='menu-column'>\n        <MenuIcon fontSize='large' />\n        <EmailIcon fontSize='large' />\n        <span className='logo-text'>DMail</span>\n      </div>\n      <div id='search-column'>\n        <div id='search-bar'>\n          <SearchIcon />\n          Search Mail\n        </div>\n      </div>\n      <div id='user-column'>\n        <HelpOutlineIcon fontSize='large' />\n        <AccountCircleIcon fontSize='large' />\n      </div>\n    </div>\n  )\n}\n\nexport default Navbar;\n","import React, { useContext } from 'react';\nimport AddIcon from '@material-ui/icons/Add';\nimport InboxIcon from '@material-ui/icons/Inbox';\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\nimport LabelIcon from '@material-ui/icons/Label';\nimport ReportIcon from '@material-ui/icons/Report';\nimport SendIcon from '@material-ui/icons/Send';\nimport StarIcon from '@material-ui/icons/Star';\n\nimport './sidebar.scss';\nimport DMailState from '../state/dmailState';\n\nfunction Sidebar() {\n  const { actions, emailList } = useContext(DMailState);\n  const tags = emailList.reduce((tagList, email) => {\n    email.tags.forEach(tag => {\n      if(!tagList.includes(tag)) {\n        tagList.push(tag);\n      }\n    });\n\n    return tagList;\n  }, []);\n\n  return (\n    <div id='sidebar'>\n      <button id='compose-button' onClick={() => console.warn('Compose not implemented')}>\n        <AddIcon fontSize='large' /> Compose\n      </button>\n      <button\n        className='sidebar-item flat-button'\n        onClick={() => actions.filterEmail(null)}\n      >\n        <InboxIcon /> Inbox\n      </button>\n      <span className='sidebar-item'><StarIcon /> Starred</span>\n      <span className='sidebar-item'><SendIcon /> Sent</span>\n      <span className='sidebar-item'><InsertDriveFileIcon /> Drafts</span>\n      <span className='sidebar-item'><ReportIcon /> Spam</span>\n      {Boolean(tags.length) &&\n        tags.map(tag => (\n          <button\n            className='sidebar-item flat-button'\n            key={tag}\n            onClick={() => actions.filterEmail(tag)}\n          >\n            <LabelIcon /> {tag}\n          </button>\n        ))\n      }\n    </div>\n  )\n}\n\nexport default Sidebar;\n","import React, { useContext } from 'react';\n\nimport './dmail.scss';\nimport Email from '../components/email';\nimport EmailList from '../components/emailList';\nimport Navbar from '../components/navbar';\nimport Sidebar from '../components/sidebar';\nimport DMailState from '../state/dmailState';\n\nfunction DMail() {\n  const { currentEmail } = useContext(DMailState);\n\n  return (\n    <div id='dmail'>\n      <Navbar />\n      <div className='flex-row'>\n        <Sidebar />\n        <div id='content-container'>\n          {currentEmail ? <Email /> : <EmailList />}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default DMail;\n","import React from 'react';\n\nimport './app.scss';\nimport DMail from './pages/dmail';\nimport { DMailStateProvider } from './state/dmailState';\n\nfunction App() {\n  // TODO: Add ReactRouter and history so can navigate with browser Back & Forward\n  return (\n    <div className=\"app\">\n      <DMailStateProvider>\n        <DMail />\n      </DMailStateProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './app';\nimport './index.scss';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}